<h1>Hello, welcome to your feed</h1>

<div>
<%= link_to new_post_path do %>
  New post
<% end %>
<%= button_to 'Logout', logout_path, method: :delete %>
</div>


Feed of everyones posts <br> 

<div class="container">
  <% @posts.each do |post| %>
      <div class="row"  padding="20px">
        <div class="col-sm-4">
          <div class="posts-index-img d-inline">
            <% if post.user.avatar.attached? %>
              <%= image_tag(post.user.avatar.variant(
                resize_to_limit: [100, 100])
                )%>
            <% else %>
              <img class="avatar-index rounded-circle mx-auto" src="<%= "/images/default_user.png " %>" alt="Userimage">
            <% end %>
          </div> <br>
          <%= post.user.first_name %>
          <%= post.user.last_name %>
          <a href="comment?<%=post.id%>"> Create a new comment</a>
        </div>

        <div class="col-sm-8">
          <div>
            <p><%= post.message %></p> <br>
            <% if post.image.attached? %>
            <%= image_tag(post.image.variant(
              resize_to_limit: [200, 200])
              )%>
            <% end %>
              <% thumbs_up_counter = 0 %>
              <% laugh_counter = 0 %>
              <% fire_counter = 0%>
              <% post.likes.each do |like|%>
                <%if like.react_type == "fire"%>
                  <% fire_counter += 1 %>
               <%elsif like.react_type == "laugh"%>
                 <% laugh_counter += 1 %>
                <%elsif like.react_type == "like"%>
                  <% thumbs_up_counter += 1 %>
                <% end %>
              <% end %>
            <% if post.likes.count >= 1 %>
              <div class="col">
                <div class="emoji_horizontal"><%= button_to "👍 #{thumbs_up_counter}", post_likes_path(post), method: :post, class: "emoji-button", params: { :react_type => 'like' }%></div>
                <div class="emoji_horizontal"><%= button_to "😂 #{laugh_counter}", post_likes_path(post), method: :post, class: "emoji-button", params: { :react_type => 'laugh' } %></div>
                <div class="emoji_horizontal"><%= button_to "🔥 #{fire_counter}", post_likes_path(post), method: :post, class: "emoji-button", params: { :react_type => 'fire' } %></div>
              </div>
            <% else %>
              <div class="col">
                <div class="emoji_horizontal"><%= button_to "👍", post_likes_path(post), method: :post, class: "emoji-button", params: { :react_type => 'like' }%></div>
                <div class="emoji_horizontal"><%= button_to "😂", post_likes_path(post), method: :post, class: "emoji-button", params: { :react_type => 'laugh' } %></div>
                <div class="emoji_horizontal"><%= button_to "🔥", post_likes_path(post), method: :post, class: "emoji-button", params: { :react_type => 'fire' } %></div>
              </div>
            <% end %>
          </div>

          <div class>
            <% post.comments.map do |comment| %>
            <div class= "col">
              <% if comment.user.avatar.attached? %>
                  <%= image_tag(post.user.avatar.variant(
                  resize_to_limit: [100, 100])
                  )%>
                  <% else %>
                  <img class="avatar-index rounded-circle mx-auto" src="<%= "/images/default_user.png " %>" alt="Userimage">
              <% end %>
              </div>
              <div class="col">
                <p><%= comment.user.first_name%> says <%= comment.content %></p>
              </div class=>
            <% end %>
          </div>

          </div>
          <% end %>
      
    </div>
  </div>





